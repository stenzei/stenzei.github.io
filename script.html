<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">

<head>

<meta charset="utf-8" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="pandoc" />


<meta name="author" content="stenze" />

<meta name="date" content="2016-08-29" />

<title>Building Shiny Dashboards</title>

<script src="site_libs/jquery-1.11.3/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/cosmo.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<script src="site_libs/jqueryui-1.11.4/jquery-ui.min.js"></script>
<link href="site_libs/tocify-1.9.1/jquery.tocify.css" rel="stylesheet" />
<script src="site_libs/tocify-1.9.1/jquery.tocify.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<link href="site_libs/font-awesome-4.5.0/css/font-awesome.min.css" rel="stylesheet" />


<style type="text/css">code{white-space: pre;}</style>
<style type="text/css">
div.sourceCode { overflow-x: auto; }
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; } /* Keyword */
code > span.dt { color: #902000; } /* DataType */
code > span.dv { color: #40a070; } /* DecVal */
code > span.bn { color: #40a070; } /* BaseN */
code > span.fl { color: #40a070; } /* Float */
code > span.ch { color: #4070a0; } /* Char */
code > span.st { color: #4070a0; } /* String */
code > span.co { color: #60a0b0; font-style: italic; } /* Comment */
code > span.ot { color: #007020; } /* Other */
code > span.al { color: #ff0000; font-weight: bold; } /* Alert */
code > span.fu { color: #06287e; } /* Function */
code > span.er { color: #ff0000; font-weight: bold; } /* Error */
code > span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
code > span.cn { color: #880000; } /* Constant */
code > span.sc { color: #4070a0; } /* SpecialChar */
code > span.vs { color: #4070a0; } /* VerbatimString */
code > span.ss { color: #bb6688; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { color: #19177c; } /* Variable */
code > span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code > span.op { color: #666666; } /* Operator */
code > span.bu { } /* BuiltIn */
code > span.ex { } /* Extension */
code > span.pp { color: #bc7a00; } /* Preprocessor */
code > span.at { color: #7d9029; } /* Attribute */
code > span.do { color: #ba2121; font-style: italic; } /* Documentation */
code > span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code > span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code > span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
</style>
<style type="text/css">
  pre:not([class]) {
    background-color: white;
  }
</style>


<style type="text/css">
h1 {
  font-size: 34px;
}
h1.title {
  font-size: 38px;
}
h2 {
  font-size: 30px;
}
h3 {
  font-size: 24px;
}
h4 {
  font-size: 18px;
}
h5 {
  font-size: 16px;
}
h6 {
  font-size: 12px;
}
.table th:not([align]) {
  text-align: left;
}
</style>

<link rel="stylesheet" href="css/scholmd-heuristically-latest.min.css" type="text/css" />

</head>

<body>

<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
code {
  color: inherit;
  background-color: rgba(0, 0, 0, 0.04);
}
img {
  max-width:100%;
  height: auto;
}
.tabbed-pane {
  padding-top: 12px;
}
button.code-folding-btn:focus {
  outline: none;
}
</style>


<style type="text/css">
/* padding for bootstrap navbar */
body {
  padding-top: 51px;
  padding-bottom: 40px;
}
/* offset scroll position for anchor links (for fixed navbar)  */
.section h1 {
  padding-top: 56px;
  margin-top: -56px;
}

.section h2 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h3 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h4 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h5 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h6 {
  padding-top: 56px;
  margin-top: -56px;
}
</style>

<script>
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark it active
  menuAnchor.parent().addClass('active');

  // if it's got a parent navbar menu mark it active as well
  menuAnchor.closest('li.dropdown').addClass('active');
});
</script>


<div class="container-fluid main-container">

<!-- tabsets -->
<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});
</script>

<!-- code folding -->




<script>
$(document).ready(function ()  {

    // move toc-ignore selectors from section div to header
    $('div.section.toc-ignore')
        .removeClass('toc-ignore')
        .children('h1,h2,h3,h4,h5').addClass('toc-ignore');

    // establish options
    var options = {
      selectors: "h1,h2",
      theme: "bootstrap3",
      context: '.toc-content',
      hashGenerator: function (text) {
        return text.replace(/[.\\/?&!#<>]/g, '').replace(/\s/g, '_').toLowerCase();
      },
      ignoreSelector: ".toc-ignore",
      scrollTo: 0
    };
    options.showAndHide = false;
    options.smoothScroll = true;

    // tocify
    var toc = $("#TOC").tocify(options).data("toc-tocify");
});
</script>

<style type="text/css">

#TOC {
  margin: 25px 0px 20px 0px;
}
@media (max-width: 768px) {
#TOC {
  position: relative;
  width: 100%;
}
}


.toc-content {
  padding-left: 30px;
  padding-right: 40px;
}

div.main-container {
  max-width: 1200px;
}

div.tocify {
  width: 20%;
  max-width: 260px;
  max-height: 85%;
}

@media (min-width: 768px) and (max-width: 991px) {
  div.tocify {
    width: 25%;
  }
}

@media (max-width: 767px) {
  div.tocify {
    width: 100%;
    max-width: none;
  }
}

.tocify ul, .tocify li {
  line-height: 20px;
}

.tocify-subheader .tocify-item {
  font-size: 0.90em;
  padding-left: 25px;
  text-indent: 0;
}

.tocify .list-group-item {
  border-radius: 0px;
}

.tocify-subheader {
  display: inline;
}
.tocify-subheader .tocify-item {
  font-size: 0.95em;
}

</style>

<!-- setup 3col/9col grid for toc_float and main content  -->
<div class="row-fluid">
<div class="col-xs-12 col-sm-4 col-md-3">
<div id="TOC" class="tocify">
</div>
</div>

<div class="toc-content col-xs-12 col-sm-8 col-md-9">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">stenze-R-pieces</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="index.html">Blog</a>
</li>
<li>
  <a href="about.html">About</a>
</li>
<li>
  <a href="http://github.com/stenzei">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div class="fluid-row" id="header">



<h1 class="title toc-ignore">Building Shiny Dashboards</h1>
<h4 class="author"><em>stenze</em></h4>
<h4 class="date"><em>29 August 2016</em></h4>

</div>


<div id="introduction" class="section level1">
<h1>Introduction</h1>
<div id="prerequisites" class="section level2">
<h2>Prerequisites</h2>
<p>Requirements:</p>
<ul>
<li>Intermediate R programming skills — knowing how to use dplyr and pipes</li>
<li>having a rough understanding of the grammar of graphics would be advantageous.</li>
</ul>
<p>Needed software: - R preferably 3.4.1 or later — RStudio (latest version is always best) — shiny 1.0.5 or later — shinydashboard 0.6.1 or later — flexdashboard 0.5 or later — tidyverse 1.1.1 or later — highcharter 0.5.0 or later — packrat 0.4.8 or later. This is for a start. It will be probably necessary to install further packages from the internet during the workshop.</p>
</div>
<div id="what-is-shiny-and-what-is-it-about" class="section level2">
<h2>What is Shiny and what is it about?</h2>
<p>Shiny is a R package to allow to interact with plots, maps and tables to explore data. Especially dashboards are well suited to present data in an interactive way. There is a number of R packages related to Shiny, which make it relatively easy to develop dashboards by wrapping web technologies like HTML, CSS and JavaScript. This script introduces into developing dashboards with Shiny and related packages. Core concepts of shiny (e.g. reactiveness) as well as programming techniques like modularisation and debugging will be addressed.</p>
</div>
<div id="about-this-workshop" class="section level2">
<h2>About this workshop</h2>
<p>The aim of this workshop is to give a headstart for building shiny applications and especially dashboards. There is alot of very good material available in the internet especially on the webpage of <a href="https://shiny.rstudio.com">RStudio</a>. We will use the documentation and tutorial there as main reference.</p>
<p>For plotting we use <a href="http://jkunst.com/highcharter/index.html">highcharter</a>, which is a R wrapper around the Java Script library Highcharts. This library respects the grammar of graphics, uses pipes and allows to demonstrate the usage of Java Script wrappers and their extension with Java Script in R. The usage of Highcharts is not free for commertial and governmental use, but we are allowed to use it for scientific and educational purposes.</p>
<p>At the end of this workshop you will have build a Shiny Dashboard an will know where and how to find help about Shiny and related technologies quickly.</p>
</div>
<div id="ressources" class="section level2">
<h2>Ressources</h2>
<p>RStudio’s Shiny web page <a href="https://shiny.rstudio.com">shiny.rstudio.com</a> is your first choise. There is nothing better for self-study then the RStudio web page. There, you can find introductory tutorial videos, webinars and articles about advanced shiny programming.</p>
<p>Everything else we are going to use is mostly well documented. You will find links to tutorials and documentation pages throughout this skript.</p>
</div>
</div>
<div id="basic-shiny" class="section level1">
<h1>Basic Shiny</h1>
<div id="first-example" class="section level2">
<h2>First Example</h2>
<p>The following is a first example of a simple Shiny app, which displys some random numbers. The app allows to choose the number of random values. The details of the code are discused in the following sections.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(shiny)
<span class="kw">library</span>(highcharter)

server &lt;-<span class="st"> </span><span class="cf">function</span>(input, output) {
  <span class="co"># Define the output</span>
  output<span class="op">$</span>noise_plot &lt;-<span class="st"> </span><span class="kw">renderHighchart</span>({
    <span class="co"># Lets make some noise!</span>
    val &lt;-<span class="st"> </span><span class="kw">rnorm</span>(<span class="dt">n =</span> input<span class="op">$</span>num, <span class="dt">mean =</span> <span class="dv">3</span>, <span class="dt">sd =</span> <span class="dv">1</span>)
    num &lt;-<span class="st"> </span><span class="kw">seq</span>(<span class="dv">1</span><span class="op">:</span>input<span class="op">$</span>num)
    dta &lt;-<span class="st"> </span>dplyr<span class="op">::</span><span class="kw">bind_cols</span>(<span class="dt">num =</span> num, <span class="dt">val =</span> val)
    
    <span class="co"># Create the plot.</span>
    highcharter<span class="op">::</span><span class="kw">highchart</span>() <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">      </span>highcharter<span class="op">::</span><span class="kw">hc_xAxis</span>(dta<span class="op">$</span>num) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">      </span>highcharter<span class="op">::</span><span class="kw">hc_add_series</span>(<span class="dt">name =</span> <span class="st">&quot;random data&quot;</span>,
                                 <span class="dt">data =</span> dta<span class="op">$</span>val)
  })
}

ui &lt;-<span class="st"> </span><span class="kw">fluidPage</span>(
  highcharter<span class="op">::</span><span class="kw">highchartOutput</span>(<span class="st">&quot;noise_plot&quot;</span>),
  <span class="kw">sliderInput</span>(<span class="st">&quot;num&quot;</span>, <span class="st">&quot;Number of Values&quot;</span>, <span class="dt">min =</span> <span class="dv">10</span>, <span class="dt">max =</span> <span class="dv">500</span>, <span class="dt">value =</span> <span class="dv">200</span>)
)

<span class="co"># The shiny app is created here.</span>
<span class="kw">shinyApp</span>(<span class="dt">ui =</span> ui, <span class="dt">server =</span> server, <span class="dt">options =</span> <span class="kw">list</span>(<span class="dt">height =</span> <span class="dv">550</span>))</code></pre></div>
<div style="width: 100% ; height: 550px ; text-align: center; box-sizing: border-box; -moz-box-sizing: border-box; -webkit-box-sizing: border-box;" class="muted well">Shiny applications not supported in static R Markdown documents</div>
</div>
<div id="app-design" class="section level2">
<h2>App Design</h2>
<div id="app.r" class="section level3">
<h3>app.R</h3>
<p>On the top level of your working directory lives the file app.R, which has the following structure:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(shiny)

<span class="co"># All the logic, data crunching, tidying, and wrangling goes here.</span>
<span class="co"># (That is not always true, but it is the default case.)</span>
<span class="co"># Technically server is a function.</span>
server &lt;-<span class="st"> </span><span class="cf">function</span>(input, output) {

}

<span class="co"># The user interface is defined here. Technically ui is a list.</span>
ui &lt;-<span class="st"> </span><span class="kw">fluidPage</span>(
  
)

<span class="co"># The shiny app is created here.</span>
<span class="kw">shinyApp</span>(<span class="dt">ui =</span> ui, <span class="dt">server =</span> server)</code></pre></div>
</div>
<div id="server.r-and-ui.r" class="section level3">
<h3>server.R and ui.R</h3>
<p>In larger projects <code>server</code> and <code>ui</code> live in separate files on the top level of your working directory.</p>
</div>
<div id="inputs-and-outputs" class="section level3">
<h3>Inputs and outputs</h3>
<p>Inside the server function output elements are constructed and input elements are logically linked to them. Inside the ui list input and output elements are arranged.</p>
</div>
<div id="exercise" class="section level3">
<h3>Exercise</h3>
<blockquote>
<ol style="list-style-type: decimal">
<li>Create a working directory for your first app. Copy the code of the first example into your RStudio editor and save the file in your working directory. Run the app by typing <a href="https://shiny.rstudio.com/reference/shiny/1.0.5/runApp.html"><code>runApp()</code></a> into the console or press the <em>Run App</em> button in the upper left corner.</li>
<li>Add two more sliders to the first example to allow users to adjust mean and standard deviation.</li>
</ol>
</blockquote>
</div>
</div>
<div id="layout-of-user-interfaces" class="section level2">
<h2>Layout of user interfaces</h2>
<p>The <code>ui</code>-list ist createte by the function <a href="https://shiny.rstudio.com/reference/shiny/1.0.5/fluidPage.html"><code>fluidPage()</code></a>. This function arranges interface elements and adjusts the layout to the browser, where your app runs. A simpla layout may look like this:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">ui &lt;-<span class="st"> </span><span class="kw">fluidPage</span>(
  <span class="kw">titlePanel</span>(<span class="st">&quot;title panel&quot;</span>),
  
  <span class="kw">sidebarLayout</span>(
    <span class="kw">sidebarPanel</span>(<span class="st">&quot;this a sidebar panel&quot;</span>),
    <span class="kw">mainPanel</span>(<span class="st">&quot;this is the main panel&quot;</span>)  
)</code></pre></div>
<p>This is the framework for a simple straight foreward user interface. See the reference pages of <a href="https://shiny.rstudio.com/reference/shiny/1.0.5/titlePanel.html"><code>titlePanel()</code></a>, <a href="https://shiny.rstudio.com/reference/shiny/1.0.5/sidebarLayout.html"><code>sidebarLayout()</code></a>, <a href="https://shiny.rstudio.com/reference/shiny/1.0.5/sidebarPanel.html"><code>sidebarPanel()</code></a>, and <a href="https://shiny.rstudio.com/reference/shiny/1.0.5/mainPanel.html"><code>mainPanel()</code></a> for more details.</p>
<p>Inside the <a href="https://shiny.rstudio.com/reference/shiny/1.0.5/sidebarLayout.html"><code>sidebarLayout()</code></a> and <a href="https://shiny.rstudio.com/reference/shiny/1.0.5/mainPanel.html"><code>mainPanel()</code></a> you can place your input and output elements as well as formattet text:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">ui &lt;-<span class="st"> </span><span class="kw">fluidPage</span>(
  <span class="kw">titlePanel</span>(<span class="st">&quot;Random Numbers&quot;</span>),
  
  <span class="kw">sidebarPanel</span>(
    <span class="kw">h3</span>(<span class="st">&quot;Controls&quot;</span>),
    <span class="kw">sliderInput</span>(<span class="st">&quot;num&quot;</span>, <span class="st">&quot;Number of Values&quot;</span>, <span class="dt">min =</span> <span class="dv">10</span>, <span class="dt">max =</span> <span class="dv">500</span>, <span class="dt">value =</span> <span class="dv">200</span>),
    <span class="kw">p</span>(<span class="st">&quot;Use the slider input to choose the number of plotted random values.&quot;</span>)
  ),
  
  <span class="kw">mainPanel</span>(
    <span class="kw">h3</span>(<span class="st">&quot;Plots &amp; Infos&quot;</span>),  
    highcharter<span class="op">::</span><span class="kw">highchartOutput</span>(<span class="st">&quot;noise_plot&quot;</span>),
    <span class="kw">p</span>(<span class="st">&quot;This a plot of random numbers.&quot;</span>)
  )
)</code></pre></div>
<div style="width: 100% ; height: 580px ; text-align: center; box-sizing: border-box; -moz-box-sizing: border-box; -webkit-box-sizing: border-box;" class="muted well">Shiny applications not supported in static R Markdown documents</div>
<p>This example shows the HTML builder funktions <a href="https://shiny.rstudio.com/reference/shiny/1.0.5/builder.html"><code>h3()</code></a> and <a href="https://shiny.rstudio.com/reference/shiny/1.0.5/builder.html"><code>p()</code></a>. These are basically wrappers around HTML tags. There are alot more of these functions. More examples and details are given in the <a href="https://shiny.rstudio.com/tutorial/written-tutorial/lesson2/">RStudio Shiny Tutorial</a>.</p>
</div>
<div id="controlls" class="section level2">
<h2>Controlls</h2>
<p>In the example above we have already used the <a href="https://shiny.rstudio.com/reference/shiny/1.0.5/sliderInput.html"><code>sliderInput()</code></a> to allow users to select specific value. The first parameter of <a href="https://shiny.rstudio.com/reference/shiny/1.0.5/sliderInput.html"><code>sliderInput()</code></a> is its inputId. We access the value of the input by referencing this ID in the server via <code>input$inputId</code>.</p>
<p>There is alot more to say about controll widgeds. An overview about this is given in Lesson 3 of the <a href="https://shiny.rstudio.com/tutorial/written-tutorial/lesson3/">RStudio Shiny Tutorial</a>. In the following you see the usage of a few controll widgets:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">ui &lt;-<span class="st"> </span><span class="kw">fluidPage</span>(
  <span class="kw">titlePanel</span>(<span class="st">&quot;Random Numbers&quot;</span>),
  <span class="kw">sidebarPanel</span>(
    <span class="kw">h3</span>(<span class="st">&quot;Controls&quot;</span>),
    <span class="kw">sliderInput</span>(<span class="st">&quot;num&quot;</span>, <span class="st">&quot;Number of Values&quot;</span>, <span class="dt">min =</span> <span class="dv">10</span>, <span class="dt">max =</span> <span class="dv">500</span>, <span class="dt">value =</span> <span class="dv">200</span>),
    <span class="kw">p</span>(<span class="st">&quot;Use the slider input to choose the number of plotted random values.&quot;</span>),
    <span class="kw">numericInput</span>(<span class="st">&quot;mean&quot;</span>, <span class="kw">h3</span>(<span class="st">&quot;Mean&quot;</span>), <span class="dt">value =</span> <span class="dv">0</span>),
    <span class="kw">numericInput</span>(<span class="st">&quot;sd&quot;</span>, <span class="kw">h3</span>(<span class="st">&quot;Standard Deviation&quot;</span>), <span class="dt">value =</span> <span class="dv">1</span>)
  ),
  <span class="kw">mainPanel</span>(
    <span class="kw">h3</span>(<span class="st">&quot;Plots &amp; Infos&quot;</span>),  
    highcharter<span class="op">::</span><span class="kw">highchartOutput</span>(<span class="st">&quot;noise_plot&quot;</span>),
    <span class="kw">p</span>(<span class="st">&quot;This is still a plot of random numbers.&quot;</span>)
  )
)</code></pre></div>
<div style="width: 100% ; height: 600px ; text-align: center; box-sizing: border-box; -moz-box-sizing: border-box; -webkit-box-sizing: border-box;" class="muted well">Shiny applications not supported in static R Markdown documents</div>
<div id="exercise-1" class="section level3">
<h3>Exercise</h3>
<blockquote>
<p>Extend your app so that it looks like the following:</p>
</blockquote>
<div style="width: 100% ; height: 600px ; text-align: center; box-sizing: border-box; -moz-box-sizing: border-box; -webkit-box-sizing: border-box;" class="muted well">Shiny applications not supported in static R Markdown documents</div>
</div>
</div>
<div id="outputs" class="section level2">
<h2>Outputs</h2>
<p>In the examples and exercices above we already used the <a href="http://jkunst.com/highcharter/shiny.html"><code>highchartOutput()</code></a>. This function displays plots generated with the <a href="http://jkunst.com/highcharter/index.html"><code>highcharter</code></a> package.</p>
<p>There are also many other output types already included in the <code>shiny</code> package. You can get an overview in Lesson 4 of the <a href="https://shiny.rstudio.com/tutorial/written-tutorial/lesson4/">RStudio Shiny Tutorial</a>. Two of these outputs are demonstrated in the following example:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">server &lt;-<span class="st"> </span><span class="cf">function</span>(input, output) {
  <span class="co"># Define the output</span>
  output<span class="op">$</span>noise_plot &lt;-<span class="st"> </span><span class="kw">renderPlot</span>({
    <span class="co"># Lets make some noise!</span>
    val &lt;-<span class="st"> </span><span class="kw">rnorm</span>(<span class="dt">n =</span> input<span class="op">$</span>num, <span class="dt">mean =</span> <span class="dv">0</span>, <span class="dt">sd =</span> <span class="dv">1</span>)
    num &lt;-<span class="st"> </span><span class="kw">seq</span>(<span class="dv">1</span><span class="op">:</span>input<span class="op">$</span>num)
    dta &lt;-<span class="st"> </span>dplyr<span class="op">::</span><span class="kw">bind_cols</span>(<span class="dt">num =</span> num, <span class="dt">val =</span> val)
    
    <span class="co"># Create the plot.</span>
    <span class="kw">plot</span>(dta)
  })
  
  output<span class="op">$</span>noise_table &lt;-<span class="st"> </span><span class="kw">renderDataTable</span>({
    <span class="co"># Lets make some noise!</span>
    val &lt;-<span class="st"> </span><span class="kw">rnorm</span>(<span class="dt">n =</span> input<span class="op">$</span>num, <span class="dt">mean =</span> <span class="dv">0</span>, <span class="dt">sd =</span> <span class="dv">1</span>)
    num &lt;-<span class="st"> </span><span class="kw">seq</span>(<span class="dv">1</span><span class="op">:</span>input<span class="op">$</span>num)
    dta &lt;-<span class="st"> </span>dplyr<span class="op">::</span><span class="kw">bind_cols</span>(<span class="dt">num =</span> num, <span class="dt">val =</span> val)
    
    <span class="co"># Return the table data.</span>
    dta
  })
}

ui &lt;-<span class="st"> </span><span class="kw">fluidPage</span>(
  <span class="kw">sidebarPanel</span>(
    <span class="kw">sliderInput</span>(<span class="st">&quot;num&quot;</span>, <span class="st">&quot;Number of Values&quot;</span>, <span class="dt">min =</span> <span class="dv">10</span>, <span class="dt">max =</span> <span class="dv">500</span>, <span class="dt">value =</span> <span class="dv">200</span>)
  ),
  
  <span class="kw">mainPanel</span>(
    <span class="kw">plotOutput</span>(<span class="st">&quot;noise_plot&quot;</span>),
    <span class="kw">dataTableOutput</span>(<span class="st">&quot;noise_table&quot;</span>)
  )
)
<span class="kw">shinyApp</span>(<span class="dt">ui =</span> ui, <span class="dt">server =</span> server, <span class="dt">options =</span> <span class="kw">list</span>(<span class="dt">height =</span> <span class="dv">800</span>))</code></pre></div>
<div style="width: 100% ; height: 800px ; text-align: center; box-sizing: border-box; -moz-box-sizing: border-box; -webkit-box-sizing: border-box;" class="muted well">Shiny applications not supported in static R Markdown documents</div>
<p>The outputs used here are the standard shiny <a href="https://shiny.rstudio.com/reference/shiny/1.0.5/plotOutput.html">plot output</a> and the shiny <a href="https://shiny.rstudio.com/reference/shiny/1.0.5/tableOutput.html">output for data tables</a>.</p>
<div id="exercise-2" class="section level3">
<h3>Exercise</h3>
<blockquote>
<ol style="list-style-type: decimal">
<li>Find out about the differences about <code>renderTable()</code> and <code>renderDataTable()</code>. (There are difference on the level of usage, and on a technical level. Both illustrate the the extensively used approach of shiny to wrap Java Script libraries.)</li>
<li>Change your table (e.g. number of shown lines).</li>
<li>Change the layout of your app: You now want to display the plot and the table side by side. (Hint: <a href="https://shiny.rstudio.com/reference/shiny/1.0.5/column.html"><code>column()</code></a> and <a href="https://shiny.rstudio.com/reference/shiny/1.0.5/fluidPage.html"><code>fluidRow()</code></a>)</li>
</ol>
</blockquote>
</div>
</div>
<div id="reactivity" class="section level2">
<h2>Reactivity</h2>
<p>This is the core concept of shiny. Understanding this is crucial writing correct and efficient code and ,in the end, for being able to develop more complex apps like dashboards. The code of Shiny apps is not executed sequentially but on demand. Code parts react to what is happening in other code parts. This reactivity could be understood by a directed information propagation graph. In this graph information is propagated from root nodes to the leafes.</p>
<p>We used reactiveness implicitly in all the examples: <code>output$...</code> reacts to changes is <code>input$...</code>. As a simple information propagation graph, it looks as follows:</p>
<div class="figure">
<img src="https://shiny.rstudio.com/images/reactivity_diagrams/simplest.png" alt="Simple information propagation graph (Source: RStudio)" />
<p class="caption">Simple information propagation graph (Source: <a href="https://shiny.rstudio.com/articles/reactivity-overview.html">RStudio</a>)</p>
</div>
<p>On the left there is some <code>input$...</code> element (called <em>reactive source</em>), on the right there is a <code>output$...</code> reacting on changes in the input (called <em>reactive endpoint</em>). This means the code for generating the output (e.g. a plot or a table) inside the server function is executed: Everytime we move the slider input in our latest app the functions <code>renderPlot()</code> and <code>renderTable()</code> are re-executed.</p>
<p>This has the advantage, that code is only executed when needed for the output. What we also want is that we execute as little code as possible to update the output. Thus we want to avoid redundant code execution.</p>
<p>In out last example above, the <code>server()</code> code contains the following part twice, in <code>renderPlot()</code> and <code>renderTable()</code>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">    <span class="co"># Lets make some noise!</span>
    val &lt;-<span class="st"> </span><span class="kw">rnorm</span>(<span class="dt">n =</span> input<span class="op">$</span>num, <span class="dt">mean =</span> <span class="dv">0</span>, <span class="dt">sd =</span> <span class="dv">1</span>)
    num &lt;-<span class="st"> </span><span class="kw">seq</span>(<span class="dv">1</span><span class="op">:</span>input<span class="op">$</span>num)
    dta &lt;-<span class="st"> </span>dplyr<span class="op">::</span><span class="kw">bind_cols</span>(<span class="dt">num =</span> num, <span class="dt">val =</span> val)</code></pre></div>
<p>This means the calculation of <code>dta</code> is done twice. You always want to avoid this (especially for costly calculations). In these situation we can introduce a <em>reactive conductor</em>, which is executed before the <em>reactive endpoints</em> are calculated. The information propagation graph looks as follows:</p>
<div class="figure">
<img src="https://shiny.rstudio.com/images/reactivity_diagrams/conductor.png" alt="Information propagation graph with one conductor (Source: RStudio)" />
<p class="caption">Information propagation graph with one conductor (Source: <a href="https://shiny.rstudio.com/articles/reactivity-overview.html">RStudio</a>)</p>
</div>
<p>The corresponding <code>server()</code> code is shown in the following:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">server &lt;-<span class="st"> </span><span class="cf">function</span>(input, output) {
  <span class="co"># Do the calculatins</span>
  dta &lt;-<span class="st"> </span><span class="kw">reactive</span>({
    <span class="co"># Lets make some noise!</span>
    val &lt;-<span class="st"> </span><span class="kw">rnorm</span>(<span class="dt">n =</span> input<span class="op">$</span>num, <span class="dt">mean =</span> <span class="dv">0</span>, <span class="dt">sd =</span> <span class="dv">1</span>)
    num &lt;-<span class="st"> </span><span class="kw">seq</span>(<span class="dv">1</span><span class="op">:</span>input<span class="op">$</span>num)
    dta &lt;-<span class="st"> </span>dplyr<span class="op">::</span><span class="kw">bind_cols</span>(<span class="dt">num =</span> num, <span class="dt">val =</span> val)
    dta
  })
  
  <span class="co"># Define plot output</span>
  output<span class="op">$</span>noise_plot &lt;-<span class="st"> </span><span class="kw">renderPlot</span>({
    <span class="co"># Create and return the plot.</span>
    <span class="kw">plot</span>(<span class="kw">dta</span>())
  })
  
  <span class="co"># Define table output</span>
  output<span class="op">$</span>noise_table &lt;-<span class="st"> </span><span class="kw">renderDataTable</span>({
    <span class="co"># Return the table data.</span>
    <span class="kw">dta</span>()
  })
}</code></pre></div>
<p>Now, variable <code>dta</code> becomes reactive (i.e. a responsive conductor). Note that responsive conductors are followed by <code>()</code> when they are called.</p>
<div id="exercise-3" class="section level3">
<h3>Exercise</h3>
<blockquote>
<p>Modify your app, that <code>dta</code> is only calculated once.</p>
</blockquote>
<p>For more information you may want to refer to <a href="https://shiny.rstudio.com/tutorial/written-tutorial/lesson6/">lesson 6</a> of the RStudio shiny tutorial. For exhaustive informations on this topic see <a href="https://shiny.rstudio.com/articles/#reactivity">RStudio’s articles about reactivity</a>.</p>
</div>
</div>
</div>
<div id="debugging" class="section level1">
<h1>Debugging</h1>
<p>To understand what your app is doing you can and want to apply various debugging techniques. In the following we examine three of them. There is also an RStudio article on <a href="https://shiny.rstudio.com/articles/debugging.html">debugging</a> shiny apps.</p>
<div id="showcase" class="section level2">
<h2>Showcase</h2>
<p>Simple apps can be run in <em>showcase mode</em>. This can help to understand how reactivity works and which part of code is executed under which circumstances. You start your app in the console by typing:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">runApp</span>(<span class="st">&quot;MyApp&quot;</span>, <span class="dt">display.mode =</span> <span class="st">&quot;showcase&quot;</span>)</code></pre></div>
<p>You can find examples of running apps in showcase mode at the RStudio <a href="https://shiny.rstudio.com/gallery/">gallery</a> e.g. in <a href="https://shiny.rstudio.com/gallery/kmeans-example.html">iris k-means clustering</a>.</p>
<div id="exercise-4" class="section level3">
<h3>Exercise</h3>
<blockquote>
<p>Introduce <code>radioButtons()</code> in your <code>ui</code> list, which let you choose the color of plotted points. Run your app in showcase mode. Hint: Your <code>plot()</code> should look like that: <code>plot(dta(), col = input$col)</code>.</p>
</blockquote>
</div>
</div>
<div id="reactive-log" class="section level2">
<h2>Reactive Log</h2>
<p>Another way to understand the reactive nature of your app is to examine the <em>reactive log</em> of your app. Basicaly, with this function you can examine the information propagation graph of your app. To start the reactive log execute</p>
<ul>
<li><code>options(shiny.reactlog=TRUE)</code> in your RStudio console,</li>
<li>start your app by <code>runApp('dmo/MyApp.R')</code>,</li>
<li>perform one or two actions in your app, and</li>
<li>hit CTRL+F3 (or for Mac users Command+F3, or for Mac users with touch bar fn+Command+F3).</li>
</ul>
<p>You then see the reactive log of your app for the actions you just performed.</p>
<div id="exercise-5" class="section level3">
<h3>Exercise</h3>
<blockquote>
<p>Just try this with your last app.</p>
</blockquote>
</div>
</div>
<div id="browser" class="section level2">
<h2><code>browser()</code></h2>
<p>Especially in larger apps and for developing complicated parts of your code which may refer to a certain state of your app, showcase and reactive log are not helpfull. In these situation you want to use the <code>browser()</code> function. You can put it anywhere in your R-code. Code execution stopps ass soon as it passes the <code>browser()</code>. You then can analyse the state of your app, e.g. examine values of variables.</p>
<div id="example" class="section level3">
<h3>Example</h3>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">server &lt;-<span class="st"> </span><span class="cf">function</span>(input, output) {
  <span class="co"># Do the calculatins</span>
  dta &lt;-<span class="st"> </span><span class="kw">reactive</span>({
<span class="kw">browser</span>()    
    <span class="co"># Lets make some noise!</span>
    val &lt;-<span class="st"> </span><span class="kw">rnorm</span>(<span class="dt">n =</span> input<span class="op">$</span>num, <span class="dt">mean =</span> <span class="dv">0</span>, <span class="dt">sd =</span> <span class="dv">1</span>)
    num &lt;-<span class="st"> </span><span class="kw">seq</span>(<span class="dv">1</span><span class="op">:</span>input<span class="op">$</span>num)
    dta &lt;-<span class="st"> </span>dplyr<span class="op">::</span><span class="kw">bind_cols</span>(<span class="dt">num =</span> num, <span class="dt">val =</span> val)
    dta
  })
  
  ...
}</code></pre></div>
</div>
<div id="exercise-6" class="section level3">
<h3>Exercise</h3>
<blockquote>
<p>Try this and play around.</p>
</blockquote>
<p>Do not forget to remove all <code>browser()</code> calls from your code after debugging.</p>
</div>
</div>
</div>
<div id="dashboards" class="section level1">
<h1>Dashboards</h1>
<p>As soon as you want to communicate more complex data analyses and allow for users to play around with your data, you need to organize your inputs and output in some meaningfull way. For this pourose dashboars are used. At the moment there are basically two R packages to build dashborads: <a href="http://rmarkdown.rstudio.com/flexdashboard/">flexdashboard</a> and <a href="http://rstudio.github.io/shinydashboard/">shinydashboard</a>. In the following a brief overview is given. You will learn more about dashboards later on in the project.</p>
<div id="flexdashboard" class="section level2">
<h2>Flexdashboard</h2>
<p>The <a href="http://rmarkdown.rstudio.com/flexdashboard/shiny.html">flexdashboard</a> package uses <a href="http://rmarkdown.rstudio.com">rmarkdown</a> to structure dashboards. The advandtage of rmarkdown is that is easy to code. The disadvantage is that it is not R, which means that some things do not work as expected (e.g. debugging with <code>browser()</code>). The flexdashboard package features many interesting layouts. The following is a simple example of a flexdashboard:</p>
<div id="example-1" class="section level3">
<h3>Example</h3>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="op">---</span>
title<span class="op">:</span><span class="st"> &quot;Random Numbers&quot;</span>
runtime<span class="op">:</span><span class="st"> </span>shiny
output<span class="op">:</span>
<span class="st">  </span>flexdashboard<span class="op">::</span>flex_dashboard<span class="op">:</span>
<span class="st">    </span>source<span class="op">:</span><span class="st"> </span>embed
    vertical_layout<span class="op">:</span><span class="st"> </span>fill
<span class="op">---</span>

Plot and Data
<span class="op">==</span><span class="er">=====================================================================</span>

Column {.sidebar}
<span class="op">-----------------------------------------------------------------------</span>

### Controls

This is a sidebar on the left.

<span class="st">``</span>{r}
<span class="kw">radioButtons</span>(<span class="st">&quot;col&quot;</span>, <span class="kw">h3</span>(<span class="st">&quot;Point Color&quot;</span>),
             <span class="dt">choices =</span> <span class="kw">list</span>(<span class="st">&quot;Red&quot;</span> =<span class="st"> &quot;red&quot;</span>, <span class="st">&quot;Blue&quot;</span> =<span class="st"> &quot;blue&quot;</span>),
             <span class="dt">selected =</span> <span class="st">&quot;blue&quot;</span>)
<span class="kw">sliderInput</span>(<span class="st">&quot;num&quot;</span>, <span class="st">&quot;Number of Values&quot;</span>, <span class="dt">min =</span> <span class="dv">10</span>, <span class="dt">max =</span> <span class="dv">500</span>, <span class="dt">value =</span> <span class="dv">200</span>)
<span class="kw">numericInput</span>(<span class="st">&quot;mean&quot;</span>, <span class="kw">h3</span>(<span class="st">&quot;Mean&quot;</span>), <span class="dt">value =</span> <span class="dv">0</span>)
<span class="kw">numericInput</span>(<span class="st">&quot;sd&quot;</span>, <span class="kw">h3</span>(<span class="st">&quot;Standard Deviation&quot;</span>), <span class="dt">value =</span> <span class="dv">1</span>)
<span class="st">``</span>

Column {.tabset}
<span class="op">-----------------------------------------------------------------------</span>

### Plot

This is a tab.

<span class="st">``</span>{r}
dta &lt;-<span class="st"> </span><span class="kw">reactive</span>({
  val &lt;-<span class="st"> </span><span class="kw">rnorm</span>(input<span class="op">$</span>num, input<span class="op">$</span>mean, input<span class="op">$</span>sd)
  num &lt;-<span class="st"> </span><span class="kw">seq</span>(<span class="dv">1</span><span class="op">:</span>input<span class="op">$</span>num)
  dta &lt;-<span class="st"> </span>dplyr<span class="op">::</span><span class="kw">bind_cols</span>(<span class="dt">num =</span> num, <span class="dt">val =</span> val)
})

<span class="co"># Define the output</span>
<span class="kw">renderPlot</span>({
  <span class="co"># Create the plot.</span>
  <span class="kw">plot</span>(<span class="kw">dta</span>(), <span class="dt">col =</span> input<span class="op">$</span>col)
})
<span class="st">``</span>

### Table

This is another tab.

<span class="st">``</span>{r}
<span class="kw">renderDataTable</span>(
  <span class="co"># Return the table data.</span>
  <span class="kw">dta</span>(), 
  <span class="dt">options =</span> <span class="kw">list</span>(<span class="dt">pageLength =</span> <span class="dv">10</span>)
)
<span class="st">``</span>

More Information
<span class="op">==</span><span class="er">=====================================================================</span>

This is a new page. Here, you might want to provide further content.</code></pre></div>
</div>
<div id="exercise-7" class="section level3">
<h3>Exercise</h3>
<blockquote>
<p>Create a new Rmd file inside your RStudio IDE and copy the example code into this file. (Note, you need to replace <code>``</code> by <code>```</code>! Otherwise the code is not syntactally correct.) Play around with the dashboard. Later on, it might be the starting point for your own project.</p>
</blockquote>
</div>
</div>
<div id="shinydashboard" class="section level2">
<h2>Shinydashboard</h2>
<p>The <a href="http://rstudio.github.io/shinydashboard/">shinydashboard</a> package uses the ‘regular’ shiny approach to structure the dashboard. This might be slightly more complicated than flexdashboard, but it is more flexible and it is R, which means, everything works as expected. The shinydashboard package provides many features like menues for notifications or messages, boxes to display values, and different styles and layouts.</p>
<p>The basic structure of a shinydashboard looks as follows:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Telling, the ui, that this is a dashboard page.</span>
ui &lt;-<span class="st"> </span><span class="kw">dashboardPage</span>(
  <span class="co"># First define the dashboard header.</span>
  <span class="kw">dashboardHeader</span>(<span class="dt">title =</span> <span class="st">&quot;Shiny dashboard&quot;</span>),
  <span class="co"># Second define the sidebar of the dashboard.</span>
  <span class="kw">dashboardSidebar</span>(
    <span class="co"># Inside the sidebar you might want to place a menue ...</span>
    <span class="kw">sidebarMenu</span>(
      <span class="kw">menuItem</span>(<span class="st">&quot;Title Item1&quot;</span>, <span class="dt">tabName =</span> <span class="st">&quot;item1&quot;</span>),
      <span class="kw">menuItem</span>(<span class="st">&quot;Title Item2&quot;</span>, <span class="dt">tabName =</span> <span class="st">&quot;item2&quot;</span>)
    ),
    <span class="co"># ... or some input elements.</span>
    <span class="kw">sliderInput</span>(<span class="st">&quot;input1&quot;</span>, <span class="st">&quot;Title Input2&quot;</span>, <span class="dt">min =</span> <span class="dv">1</span>, <span class="dt">max =</span> <span class="dv">10</span>),
    <span class="kw">numericInput</span>(<span class="st">&quot;input2&quot;</span>, <span class="st">&quot;Title Input1&quot;</span>, <span class="dt">value =</span> <span class="dv">0</span>),
  ),
  <span class="co"># Third the body of the dashboard is defined.</span>
  <span class="kw">dashboardBody</span>(
    <span class="co"># Inside the body you list all the tabs. </span>
    <span class="kw">tabItems</span>(
      <span class="co"># Tab items are referenced by the menu items. </span>
      <span class="kw">tabItem</span>(<span class="dt">tabName =</span> <span class="st">&quot;item1&quot;</span>,
        <span class="co"># The structure inside the tab is similar to ordinary Shiny apps.</span>
        <span class="kw">fluidRow</span>(
          <span class="co"># Everything which is to be shown is wrapped in boxes.</span>
          <span class="kw">box</span>(),
          <span class="kw">box</span>()
        )
      ),
      <span class="co"># The second tab item.</span>
      <span class="kw">tabItem</span>(<span class="dt">tabName =</span> <span class="st">&quot;item2&quot;</span>,
        <span class="kw">fluidRow</span>(
          <span class="kw">box</span>()
        )
      )
    )
  )
)</code></pre></div>
<p>Note, the structure of the shinydashboard only affects the <code>ui</code> list. The server remais the same as in a regular shiny app. Examine the following working example:</p>
<div id="example-2" class="section level3">
<h3>Example</h3>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(shinydashboard)

ui &lt;-<span class="st"> </span><span class="kw">dashboardPage</span>(
  <span class="kw">dashboardHeader</span>(<span class="dt">title =</span> <span class="st">&quot;Shiny dashboard&quot;</span>),
  <span class="kw">dashboardSidebar</span>(
    <span class="kw">sidebarMenu</span>(
      <span class="kw">menuItem</span>(<span class="st">&quot;Plot&quot;</span>, <span class="dt">tabName =</span> <span class="st">&quot;plot_item&quot;</span>, <span class="dt">icon =</span> <span class="kw">icon</span>(<span class="st">&quot;area-chart&quot;</span>)),
      <span class="kw">menuItem</span>(<span class="st">&quot;Data&quot;</span>, <span class="dt">tabName =</span> <span class="st">&quot;table_item&quot;</span>, <span class="dt">icon =</span> <span class="kw">icon</span>(<span class="st">&quot;table&quot;</span>)),
      <span class="kw">menuItem</span>(<span class="st">&quot;More&quot;</span>, <span class="dt">tabName =</span> <span class="st">&quot;more_item&quot;</span>, <span class="dt">icon =</span> <span class="kw">icon</span>(<span class="st">&quot;plus-square&quot;</span>))
    ),
    <span class="kw">sliderInput</span>(<span class="st">&quot;num&quot;</span>, <span class="st">&quot;Number of Values&quot;</span>, <span class="dt">min =</span> <span class="dv">10</span>, <span class="dt">max =</span> <span class="dv">500</span>, <span class="dt">value =</span> <span class="dv">200</span>),
    <span class="kw">numericInput</span>(<span class="st">&quot;mean&quot;</span>, <span class="st">&quot;Mean&quot;</span>, <span class="dt">value =</span> <span class="dv">0</span>),
    <span class="kw">numericInput</span>(<span class="st">&quot;sd&quot;</span>, <span class="st">&quot;Standard Deviation&quot;</span>, <span class="dt">value =</span> <span class="dv">1</span>)
  ),
  <span class="kw">dashboardBody</span>(
    <span class="kw">tabItems</span>(
      <span class="kw">tabItem</span>(<span class="dt">tabName =</span> <span class="st">&quot;plot_item&quot;</span>,
        <span class="co"># The structure inside the tab is similar to ordinary Shiny apps</span>
        <span class="kw">fluidRow</span>(
          <span class="kw">box</span>(<span class="dt">width =</span> <span class="dv">8</span>, <span class="kw">plotOutput</span>(<span class="st">&quot;plot&quot;</span>, <span class="dt">height =</span> <span class="dv">250</span>)),
          <span class="kw">box</span>(
            <span class="dt">width =</span> <span class="dv">4</span>,
            <span class="dt">title =</span> <span class="st">&quot;Controls&quot;</span>,
            <span class="kw">radioButtons</span>(<span class="st">&quot;col&quot;</span>, <span class="st">&quot;Point Color&quot;</span>,
                         <span class="dt">choices =</span> <span class="kw">list</span>(<span class="st">&quot;Red&quot;</span> =<span class="st"> &quot;red&quot;</span>, <span class="st">&quot;Blue&quot;</span> =<span class="st"> &quot;blue&quot;</span>),
                         <span class="dt">selected =</span> <span class="st">&quot;blue&quot;</span>)
          )
        )
      ),
      <span class="kw">tabItem</span>(<span class="dt">tabName =</span> <span class="st">&quot;table_item&quot;</span>,
        <span class="co"># The structure inside the tab is similar to ordinary Shiny apps</span>
        <span class="kw">fluidRow</span>(
          <span class="kw">box</span>(<span class="dt">width =</span> <span class="dv">12</span>, <span class="kw">dataTableOutput</span>(<span class="st">&quot;table&quot;</span>))
        )
      ),
      <span class="kw">tabItem</span>(<span class="dt">tabName =</span> <span class="st">&quot;more_item&quot;</span>,
        <span class="co"># The structure inside the tab is similar to ordinary Shiny apps</span>
        <span class="kw">fluidRow</span>(
          <span class="st">&quot;More content.&quot;</span>
        )
      )
    )
  )
)

server &lt;-<span class="st"> </span><span class="cf">function</span>(input, output) {
  <span class="co"># Generate data reactively</span>
  dta &lt;-<span class="st"> </span><span class="kw">reactive</span>({
    val &lt;-<span class="st"> </span><span class="kw">rnorm</span>(input<span class="op">$</span>num, input<span class="op">$</span>mean, input<span class="op">$</span>sd)
    num &lt;-<span class="st"> </span><span class="kw">seq</span>(<span class="dv">1</span><span class="op">:</span>input<span class="op">$</span>num)
    dta &lt;-<span class="st"> </span>dplyr<span class="op">::</span><span class="kw">bind_cols</span>(<span class="dt">num =</span> num, <span class="dt">val =</span> val)
  })
  
  <span class="co"># Define the outputs</span>
  output<span class="op">$</span>plot &lt;-<span class="st"> </span><span class="kw">renderPlot</span>({
    <span class="co"># Create the plot.</span>
    <span class="kw">plot</span>(<span class="kw">dta</span>(), <span class="dt">col =</span> input<span class="op">$</span>col)
  })
  
  output<span class="op">$</span>table &lt;-<span class="st"> </span><span class="kw">renderDataTable</span>(
    <span class="co"># Return the table data.</span>
    <span class="kw">dta</span>(), 
    <span class="dt">options =</span> <span class="kw">list</span>(<span class="dt">pageLength =</span> <span class="dv">10</span>)
  )
}

<span class="kw">shinyApp</span>(ui, server, <span class="dt">options =</span> <span class="kw">list</span>(<span class="dt">height =</span> <span class="dv">700</span>))</code></pre></div>
<div style="width: 100% ; height: 700px ; text-align: center; box-sizing: border-box; -moz-box-sizing: border-box; -webkit-box-sizing: border-box;" class="muted well">Shiny applications not supported in static R Markdown documents</div>
</div>
<div id="exercise-8" class="section level3">
<h3>Exercise</h3>
<blockquote>
<p>Create a new R file inside your RStudio IDE and copy the example code into this file. Play around with the dashboard. Later on, it might be the starting point for your own project.</p>
</blockquote>
</div>
</div>
</div>
<div id="project" class="section level1">
<h1>Project</h1>
<div id="next-steps" class="section level2">
<h2>Next Steps</h2>
<p>Now, we have done a brute force ride through features of shiny dashboard. In the following you can choose one of three posibilities for your next steps in this workshop. The aim is to deepen and extend your understanding of shiny.</p>
<ol style="list-style-type: decimal">
<li><p>You are pretty new to R and or programming and want to understand the basics more in debth: Take the RStudio Shiny Tutorial and other articles about Shiny. This is high quality material, but if you need support, you will get it here.</p></li>
<li><p>You got the basic idea of shiny and want to know more about dashboards: Go on with the example dashboard. You can read about this in the following.</p></li>
<li><p>You are pretty confident that you are able to develop your own dashboard: Go on with this and take the first steps toward your own app. Take one of the examples above or one of the two working dashboard below as a starting point. You will get as much support as possible.</p></li>
</ol>
</div>
<div id="a-shiny-weather-dashboard" class="section level2">
<h2>A Shiny Weather dashboard</h2>
<p>The app allows to compare the forcast data from different providers and assess its reliability.</p>
<div id="data" class="section level3">
<h3>Data</h3>
<p>As toy example we will create an app which shows weather forecast data from four web sites for further analyses:</p>
<ul>
<li><a href="http://www.wetter.com">wetter.com</a>, which provides weather data e.g. for <a href="http://www.spiegel.de">Spiegel Online</a>;</li>
<li><a href="http://www.wetter.de">wetter.de</a>;</li>
<li><a href="https://weather.com">weather.com</a>, which provides (among others) data for the Apple weather app;</li>
<li><a href="http://www.wetterkontor.de">wetterkontor.de</a>, which provides weather data e.g. for Bild.de.</li>
</ul>
<p>The data is scraped from these web sites using <a href="https://github.com/hadley/rvest">rvest</a> and <a href="https://cran.r-project.org/web/packages/RSelenium/">RSelenium</a>. Scraping happens on a daily basis and is not part of the dashboard.</p>
</div>
<div id="dashboard-structure" class="section level3">
<h3>Dashboard structure</h3>
<p>The dashboard comes in two versions: as <a href="http://rmarkdown.rstudio.com/flexdashboard/">flexdashboard</a> and as <a href="http://rstudio.github.io/shinydashboard/">shinydashboard</a>. Both dashbaords use modules to encapsulate different parts of the app. To access the data we will use a R6-class. You will learn about modules and R6 classes first and then go on with one of the two dashboard. Apart from the modules both dashboards are structured according to what you have learned above.</p>
</div>
<div id="exercises" class="section level3">
<h3>Exercises</h3>
<blockquote>
<p>A good way to learn is to work with and extend existing code.</p>
<ol style="list-style-type: decimal">
<li>If you decide to work on the Shiny Weather dashboard</li>
</ol>
<ul>
<li>you can download the data from <a href="https://www.dropbox.com/s/nohq6vgyfb43y1o/dta.zip?dl=0">Dropbox</a>.</li>
<li>As a starting point you can get the source code for the flexdashboard from <a href="https://github.com/stenzei/ShinyWeather">github</a>.</li>
<li>Alternatively you can get the whole bundle also from <a href="https://www.dropbox.com/s/57c0s9fkrwfep2g/MetaWeather_FlexDashb-2017-10-06.tar.gz?dl=0">Dropbox</a> and then use <code>packrat::unbundle()</code>.</li>
<li>A bundle of the Shiny Weather shinydashboard is available on <a href="(https://www.dropbox.com/s/aix5akbe28talrc/MetaWeather_ShinyDashb-2017-10-06.tar.gz?dl=0)">Dropbox</a> as well.</li>
</ul>
<ol start="2" style="list-style-type: decimal">
<li>Get your version of the Dashboard locally running and play around.<br />
</li>
<li>Add a new tab to the dashboard which displays a table showing all the data.</li>
<li>Add further tabs for further views on the data (e.g. you might want to show weather history)</li>
<li>You might want to improve the plots, add other types of plots, add more details to the map, introduce more inputs to increase interactivity. Go ahead! Try to keep the structure given and extend it.</li>
</ol>
</blockquote>
</div>
</div>
</div>
<div id="advanced-techniques" class="section level1">
<h1>Advanced techniques</h1>
<p>There are two further techniques used in the Shiny Weather dashboards, which are briefly described in the following.</p>
<div id="modules" class="section level2">
<h2>Modules</h2>
<p>Modules are good way to manage complex application code. They can be seen as independent building blocks of your dashboard or application. They consist of an ui part and a server part, both defiened in a single file. You can find a good <a href="https://shiny.rstudio.com/articles/modules.html">introduction into using modules</a> on the RStudio website. An example showing the basic struchture of a module is given in the <a href="http://shiny.rstudio.com/gallery/module-example.html">RStudio gallary</a>.</p>
<p>The two Shiny Weather dashboards use the same modules. I.e. the modules are just plugged into different dashboard frameworks.</p>
</div>
<div id="r6-classes" class="section level2">
<h2>R6-classes</h2>
<p>R6-classes allow for the object-oriented programming pardigm and are easyer to understand than the other types of R classes. Classes in general help to encapsulate and structure code in larger code bases. In the Shiny Weather Dashboard a R6-class is used to encapsulate data crunching.</p>
<p>For a comprehensive introduction on R6 classes there is a <a href="https://cran.r-project.org/web/packages/R6/vignettes/Introduction.html">vignette of the package</a>. The following example shows the basic structure of a R6-class.</p>
<div id="example-3" class="section level3">
<h3>Example</h3>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(R6)

Animal &lt;-<span class="st"> </span><span class="kw">R6Class</span>(<span class="st">&quot;Person&quot;</span>,
  <span class="co"># List of public class memders. This can be variables or functions.</span>
  <span class="co"># Public mambers are accessible form the outside of the class.</span>
  <span class="dt">public =</span> <span class="kw">list</span>(
    <span class="dt">name =</span> <span class="ot">NULL</span>,
    <span class="dt">species =</span> <span class="ot">NULL</span>,
    
    <span class="co"># This function is called everytime a new object of this </span>
    <span class="co"># class is instanziated.</span>
    <span class="dt">initialize =</span> <span class="cf">function</span>(<span class="dt">name =</span> <span class="ot">NA</span>, <span class="dt">species =</span> <span class="ot">NA</span>, <span class="dt">legs =</span> <span class="ot">NA</span>) {
      
      <span class="co"># Set variables of the class.</span>
      self<span class="op">$</span>name &lt;-<span class="st"> </span>name
      self<span class="op">$</span>species &lt;-<span class="st"> </span>species
      private<span class="op">$</span>number_of_legs &lt;-<span class="st"> </span>legs
      
      <span class="co"># Call private function of the class.</span>
      private<span class="op">$</span><span class="kw">say_hi</span>()
    },
    
    <span class="co"># Define a public function.</span>
    <span class="dt">set_legs =</span> <span class="cf">function</span>(legs) {
      private<span class="op">$</span>number_of_legs &lt;-<span class="st"> </span>legs
      private<span class="op">$</span><span class="kw">say_hi</span>(<span class="dt">again =</span> <span class="ot">TRUE</span>)
    }
  ),
  <span class="co"># List of private members, which are only accessible from inside the class. </span>
  <span class="dt">private =</span> <span class="kw">list</span>(
    <span class="co"># Definition of a private variable.</span>
    <span class="dt">number_of_legs =</span> <span class="ot">NULL</span>,
    
    <span class="co"># Define a private function.</span>
    <span class="dt">say_hi =</span> <span class="cf">function</span>(<span class="dt">again =</span> <span class="ot">FALSE</span>) {
      <span class="cf">if</span> (<span class="op">!</span>again) {
        <span class="kw">cat</span>(<span class="kw">paste0</span>(<span class="st">&quot;Hi, I am &quot;</span>, self<span class="op">$</span>name, <span class="st">&quot;, the &quot;</span>, 
                   private<span class="op">$</span>number_of_legs, <span class="st">&quot;-leged &quot;</span>, self<span class="op">$</span>species, <span class="st">&quot;.</span><span class="ch">\n</span><span class="st">&quot;</span>))
      } <span class="cf">else</span> {
        <span class="kw">cat</span>(<span class="kw">paste0</span>(<span class="st">&quot;Hi, now I am &quot;</span>, self<span class="op">$</span>name, <span class="st">&quot;, the &quot;</span>, 
                   private<span class="op">$</span>number_of_legs, <span class="st">&quot;-leged &quot;</span>, self<span class="op">$</span>species, <span class="st">&quot;.</span><span class="ch">\n</span><span class="st">&quot;</span>))
      }
    }
  )
)</code></pre></div>
<p>The shown R6-class can than be used as follows.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Instantiate an object of class Animal</span>
animal_sam &lt;-<span class="st"> </span>Animal<span class="op">$</span><span class="kw">new</span>(<span class="st">&quot;Sam&quot;</span>, <span class="st">&quot;dog&quot;</span>, <span class="st">&quot;4&quot;</span>)</code></pre></div>
<pre><code>## Hi, I am Sam, the 4-leged dog.</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Call a public function of that class</span>
animal_sam<span class="op">$</span><span class="kw">set_legs</span>(<span class="dv">5</span>)</code></pre></div>
<pre><code>## Hi, now I am Sam, the 5-leged dog.</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Public member variable are also accessible</span>
animal_sam<span class="op">$</span>name</code></pre></div>
<pre><code>## [1] &quot;Sam&quot;</code></pre>
</div>
</div>
</div>
<div id="links" class="section level1">
<h1>Links</h1>
<p>Some links to helpfull resources:</p>
<ul>
<li><a href="https://www.rstudio.com/resources/cheatsheets/">Cheetsheets</a></li>
<li><a href="https://shiny.rstudio.com">RStudio</a></li>
<li><a href="https://shiny.rstudio.com">Shiny</a></li>
<li><a href="http://rmarkdown.rstudio.com">Rmarkdown</a></li>
<li><a href="http://rmarkdown.rstudio.com/flexdashboard/">Flexdashboard</a></li>
<li><a href="https://rstudio.github.io/shinydashboard/">Shinydashboard</a></li>
<li><a href="http://jkunst.com/highcharter/index.html">Highcharter</a></li>
<li><a href="https://www.rstudio.com/products/rpackages/">Some more of the most helpfull packages for data science</a></li>
</ul>
</div>

<hr>
<p>Copyright &copy; 2016 stenze &nbsp;&nbsp;
<i class="fa fa-envelope" aria-hidden="true"></i> Contact: s at skek dot de</p>
<p><a href="imprint.html">Impressum (German)</a></p>


</div>
</div>

</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.header').parent('thead').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
